"""Masses"""

"""Unitful acceleration generated by an a P <: AbstractPotential"""
function mass(pot::P, x::Vector{<:Unitful.Length}, t::T) where {P<:AbstractPotential, T<:Unitful.Time}
    x, t = adimensional(x, t)
    return mass(pot, x, t)*ð•¦.m
end
function mass(pot::P, x::Vector{<:Unitful.Length}) where {P<:AbstractPotential}
    x = adimensional(x)
    return mass(pot, x)*ð•¦.m
end

""" Enclosed mass for P <:AbstractSphericalStaticPotential at position x"""
function mass(pot::P, x::AbstractVector{L}) where {P<:AbstractSphericalStaticPotential, L<:Real}
    r = sqrt( dot(x,x) )
    return mass(pot, r)
end


"""NFW mass"""
mass(pot::NFW, r::L) where {L<:Real} = pot.m*f_nfw(r/pot.a)


"""
    Plummer Sphere
"""
mass(pot::Plummer, r::L) where {L<:Real}  = pot.m / (1 + (pot.a/r)^2 )^1.5

"""
    PowerLawCutoff mass(r)

"""
function _mass(pot::PowerLawCutoff, r::L) where {L<:Real}
    @unpack Î±, c, Î², Î“_Î², ð”¸ =  pot
    return 2Ï€*ð”¸*c^(3-Î±)*Î“_Î²*gamma_inc(Î², r*r/(c*c),0)[1]
end
mass(pot::PowerLawCutoff, r::L) where {L<:Real} = pot.m*gamma_inc(pot.Î², (r/pot.c)^2, 0)[1]